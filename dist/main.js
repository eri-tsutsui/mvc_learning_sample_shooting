!function(t){var e={};function s(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(i,r,function(e){return t[e]}.bind(null,r));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){"use strict";s.r(e);class i extends EventTarget{constructor(){super(),this.targets=[],this.context={}}startAnimationFrame(t){this.canvas=t,this.context=t.getContext("2d"),requestAnimationFrame(()=>{this.render()})}render(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.targets.forEach(t=>{t.draw(this.context),t.update()}),requestAnimationFrame(()=>{this.render()})}addTargets(t){this.targets.push(t),console.log("[add]",t.constructor.name)}removeTargets(t){this.targets=this.targets.filter(e=>e!==t),console.log("[remove]",t.constructor.name)}}var r=new i;class n extends EventTarget{constructor(){super(),r.addTargets(this)}update(){}draw(t){}destroy(){r.removeTargets(this)}}class h extends n{constructor(){super(),this.HP=0,this.x=0,this.y=0,this.width=0,this.height=0}draw(t){}setHP(t){this.HP=t,this.HP<=0&&this.dispatchEvent(new Event("death"))}setDamage(t){this.HP-=t}setWidth(t){this.width=t}setHeight(t){this.height=t}}class a extends EventTarget{getHitObjectByClassName(t,e){let s=null;const i=r.targets.filter(t=>t.constructor.name===e);for(let e=0;e<i.length;e++){const r=i[e];if(this.hitRect(t,r)){r.dispatchEvent(new CustomEvent("hitRect",{detail:t})),s=r;break}}return s}hitOther(t){let e=!1;return r.targets.filter(e=>t!==e).some(s=>(e=this.hitRect(t,s),e)),e}hitX(t,e){return t.x+t.width/2>e.x&&t.x-t.width/2<e.x}hitY(t,e){return t.y+t.height/2>e.y&&t.y-t.height/2<e.y}hitRect(t,e){return this.hitX(t,e)&&this.hitY(t,e)}}var o=new a;class c extends h{constructor(){super(),this.x=100,this.y=200,this.setHP(100),this.setWidth(40),this.setHeight(40)}update(){o.getHitObjectByClassName(this,"Bullet")}draw(t){t.beginPath(),t.moveTo(this.x-20,this.y+10),t.lineTo(this.x+20,this.y),t.lineTo(this.x-20,this.y-10),t.closePath(),t.strokeStyle="rgb(0,0,0)",t.stroke(),t.fillStyle="rgba(0,0,255, 1)",t.fill()}}class l extends n{constructor(){super(),this.score=0}setScore(t){this.score=t}draw(t){t.fillStyle="rgb(255, 169, 0)",t.fillText("SCORE : "+this.score,10,10)}}class d extends n{constructor(t,e){super(),this.x=t,this.y=e,this.damage=10,this.addEventListener("hitRect",(t,e)=>{console.log("hit",t.detail),this.destroy()})}setSpeed(t){this.speed=t}setVector(t,e){}setDamage(t){this.damage=t}update(){this.x+=this.speed}draw(t){t.beginPath(),t.arc(this.x,this.y,2,0*Math.PI/180,360*Math.PI/180,!1),t.fillStyle="rgba(255, 255, 0, 1)",t.fill(),t.stroke()}}class u extends h{constructor(){super(),this.x=400,this.y=200,this.setHP(5),this.crashScore=10,setInterval(()=>{new d(this.x-10,this.y).setSpeed(-4)},400)}update(){this.deg=this.deg||0,this.y=3*Math.cos(this.deg*(Math.PI/180))+this.y,this.deg++;o.getHitObjectByClassName("Bullet")}draw(t){t.beginPath(),t.arc(this.x,this.y,20,0*Math.PI/180,360*Math.PI/180,!1),t.fillStyle="rgba(255,0,0,0.8)",t.fill(),t.strokeStyle="purple",t.lineWidth=8,t.stroke()}}class g extends n{constructor(){super(),this.enemysList=[],this.enemysList.push(new u),this.enemysList.forEach(t=>{t.addEventListener("death",e=>{this.enemysList=this.enemysList.filter(e=>e!=t)})})}update(){}}const y=document.createElement("canvas");function f(){y.width=innerWidth*devicePixelRatio,y.height=innerHeight*devicePixelRatio}document.body.appendChild(y),window.addEventListener("resize",f),f(),new class{constructor(t){this.canvas=t,console.log(t),this.player=new c,this.enemyManager=new g,new l}}(y),r.startAnimationFrame(y)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL0NvbW1vbi9FbnRlckZyYW1lLmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9Db21tb24vQ29tbW9uQmFzZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvVmlldy9Vbml0QmFzZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvVXRpbC9IaXRUZXN0LmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9WaWV3L1BsYXllci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvVmlldy9VSS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvVmlldy9CdWxsZXQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL1ZpZXcvRW5lbXkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL01hbmFnZXIvRW5lbXlNYW5hZ2VyLmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvTWFuYWdlci9NYWluTWFuYWdlci5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIkVudGVyRnJhbWUiLCJFdmVudFRhcmdldCIsInN1cGVyIiwidGhpcyIsInRhcmdldHMiLCJjb250ZXh0IiwiY2FudmFzIiwiZ2V0Q29udGV4dCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInJlbmRlciIsImNsZWFyUmVjdCIsIndpZHRoIiwiaGVpZ2h0IiwiZm9yRWFjaCIsInRhcmdldCIsImRyYXciLCJ1cGRhdGUiLCJwdXNoIiwiY29uc29sZSIsImxvZyIsImNvbnN0cnVjdG9yIiwiZmlsdGVyIiwiaXRlbSIsImFkZFRhcmdldHMiLCJyZW1vdmVUYXJnZXRzIiwiSFAiLCJ4IiwieSIsImRpc3BhdGNoRXZlbnQiLCJFdmVudCIsInNlbGYiLCJjbGFzc05hbWUiLCJyZXN1bHQiLCJsZW5ndGgiLCJoaXRSZWN0IiwiQ3VzdG9tRXZlbnQiLCJkZXRhaWwiLCJzb21lIiwidGFyZ2V0QSIsInRhcmdldEIiLCJoaXRYIiwiaGl0WSIsInNldEhQIiwic2V0V2lkdGgiLCJzZXRIZWlnaHQiLCJnZXRIaXRPYmplY3RCeUNsYXNzTmFtZSIsImJlZ2luUGF0aCIsIm1vdmVUbyIsImxpbmVUbyIsImNsb3NlUGF0aCIsInN0cm9rZVN0eWxlIiwic3Ryb2tlIiwiZmlsbFN0eWxlIiwiZmlsbCIsInNjb3JlIiwiZmlsbFRleHQiLCJkYW1hZ2UiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImRlc3Ryb3kiLCJzcGVlZCIsImFyYyIsIk1hdGgiLCJQSSIsImNyYXNoU2NvcmUiLCJzZXRJbnRlcnZhbCIsInNldFNwZWVkIiwiZGVnIiwiY29zIiwibGluZVdpZHRoIiwiZW5lbXlzTGlzdCIsImVuZW15IiwiZW5lIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwib25SZXNpemUiLCJpbm5lcldpZHRoIiwiZGV2aWNlUGl4ZWxSYXRpbyIsImlubmVySGVpZ2h0IiwiYm9keSIsImFwcGVuZENoaWxkIiwid2luZG93IiwicGxheWVyIiwiZW5lbXlNYW5hZ2VyIiwic3RhcnRBbmltYXRpb25GcmFtZSJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMs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RSxXQUFhbkUsS0FBS21FLFdBQVdqRCxPQUFPbUQsR0FBT0EsR0FBT0QsT0FJbkUsV0NqQkosTUFBTSxFQUFTRSxTQUFTQyxjQUFjLFVBSXRDLFNBQVNDLElBQ0wsRUFBT2hFLE1BQVFpRSxXQUFhQyxpQkFDNUIsRUFBT2pFLE9BQVNrRSxZQUFjRCxpQkFMbENKLFNBQVNNLEtBQUtDLFlBQVksR0FPMUJDLE9BQU94QixpQkFBaUIsU0FBVWtCLEdBQ2xDQSxJQUVBLElDTGUsTUFDWCxZQUFhckUsR0FFVEgsS0FBS0csT0FBU0EsRUFDZFksUUFBUUMsSUFBSWIsR0FDWkgsS0FBSytFLE9BQVMsSUFBSSxFQUNsQi9FLEtBQUtnRixhQUFlLElBQUksRUFHeEIsSUFBSSxJREpJLEdBQ2hCLEVBQVdDLG9CQUFxQiIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiLyoqXG4gKiBFbnRlckZyYW1lIHJlcXVlc3RBbmltYXRpRnJhbWXlrp/ooYzjgZfjgIFcbiAqIOWQhOOCquODluOCuOOCp+OCr+ODiOOBrnVwZGF0ZeOBqGRyYXfjg6Hjgr3jg4Pjg4njgpJjYWxs44GX57aa44GR44KLXG4gKiBzaW5nbGV0b25cbiAqIFxuICog44GT44Gh44KJ44Gv44GE44GY44KL5b+F6KaB44Gv44GC44KK44G+44Gb44KT44CCXG4gKi9cbmNsYXNzIEVudGVyRnJhbWUgZXh0ZW5kcyBFdmVudFRhcmdldCB7XG4gICAgY29uc3RydWN0b3IgKCkge1xuICAgICAgICBzdXBlciAoKTtcbiAgICAgICAgdGhpcy50YXJnZXRzID0gW107XG4gICAgICAgIHRoaXMuY29udGV4dCA9IHt9O1xuICAgIH1cbiAgICBzdGFydEFuaW1hdGlvbkZyYW1lIChjYW52YXMpIHtcbiAgICAgICAgdGhpcy5jYW52YXMgPSBjYW52YXM7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgdGhpcy5jb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB0aGlzLmNhbnZhcy53aWR0aCwgdGhpcy5jYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgdGhpcy50YXJnZXRzLmZvckVhY2godGFyZ2V0ID0+IHtcbiAgICAgICAgICAgIHRhcmdldC5kcmF3KHRoaXMuY29udGV4dCk7XG4gICAgICAgICAgICB0YXJnZXQudXBkYXRlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFkZFRhcmdldHMgKHRhcmdldCkge1xuICAgICAgICB0aGlzLnRhcmdldHMucHVzaCAodGFyZ2V0KTtcbiAgICAgICAgY29uc29sZS5sb2coJ1thZGRdJywgdGFyZ2V0LmNvbnN0cnVjdG9yLm5hbWUpO1xuICAgIH07XG4gICAgcmVtb3ZlVGFyZ2V0cyAodGFyZ2V0KSB7XG4gICAgICAgIHRoaXMudGFyZ2V0cyA9IHRoaXMudGFyZ2V0cy5maWx0ZXIgKCBpdGVtID0+IGl0ZW0gIT09IHRhcmdldCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbcmVtb3ZlXScsIHRhcmdldC5jb25zdHJ1Y3Rvci5uYW1lKTtcbiAgICB9O1xufVxuZXhwb3J0IGRlZmF1bHQgbmV3IEVudGVyRnJhbWUoKTsiLCJpbXBvcnQgRW50ZXJGcmFtZSBmcm9tIFwianMvQ29tbW9uL0VudGVyRnJhbWVcIjtcblxuLyoqXG4gKiDmj4/nlLvns7vjga7ln7rlupXjgq/jg6njgrlcbiAqIHVwZGF0ZeOBqGRyYXfjg6Hjgr3jg4Pjg4njgpLjgoLjgaHjgIFcbiAqIOOBk+OBruS6jOOBpOOBr3JlcXVlc3RBbmltYXRpb25GcmFtZeOBq+OCiOOBo+OBplxuICogY2FsbOOBleOCjOe2muOBkeOCi1xuICog5L2/55So44GX44Gf44GE5aC05ZCI44GvXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbW1vbkJhc2UgZXh0ZW5kcyBFdmVudFRhcmdldCB7XG4gICAgY29uc3RydWN0b3IgKCkge1xuICAgICAgICBzdXBlciAoKTtcbiAgICAgICAgRW50ZXJGcmFtZS5hZGRUYXJnZXRzICh0aGlzKTtcbiAgICB9XG4gICAgdXBkYXRlICgpIHt9XG4gICAgLyoqXG4gICAgICog5o+P55S7XG4gICAgICogQHBhcmFtIHtjb250ZXh0fSBjb250ZXh0IFxuICAgICAqL1xuICAgIGRyYXcgKGNvbnRleHQpIHt9XG4gICAgLyoqXG4gICAgICog6Ieq5L+h44KS5YmK6ZmkXG4gICAgICovXG4gICAgZGVzdHJveSAoKSB7XG4gICAgICAgIEVudGVyRnJhbWUucmVtb3ZlVGFyZ2V0cyAodGhpcyk7XG4gICAgICAgIGRlbGV0ZSB0aGlzO1xuICAgIH1cbn0iLCJpbXBvcnQgQ29tb25CYXNlIGZyb20gXCIuLi9Db21tb24vQ29tbW9uQmFzZVwiO1xuXG4vKipcbiAqIGVuZW1544KEcGxheWVy44Gu44OZ44O844K544Kv44Op44K544CCXG4gKiDlhbHpgJrjg5Hjg6njg6Hjg7zjgr/jga/jgZPjgaHjgonjgavlrprnvqnjgZfjgabkuIvjgZXjgYTjgIJcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVW5pdEJhc2UgZXh0ZW5kcyBDb21vbkJhc2Uge1xuICAgIGNvbnN0cnVjdG9yICgpIHtcbiAgICAgICAgc3VwZXIgKCk7XG4gICAgICAgIHRoaXMuSFAgPSAwO1xuICAgICAgICB0aGlzLnggPSAwO1xuICAgICAgICB0aGlzLnkgPSAwO1xuICAgICAgICB0aGlzLndpZHRoID0gMDtcbiAgICAgICAgdGhpcy5oZWlnaHQgPSAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiDmj4/nlLtcbiAgICAgKiBAcGFyYW0ge2NvbnRleHR9IGNvbnRleHQgXG4gICAgICovXG4gICAgZHJhdyAoY29udGV4dCkge1xuICAgICAgICAvLyBvdmVycmlkZeOBl+OBpuOBj+OBoOOBleOBhFxuICAgIH1cbiAgICAvKipcbiAgICAgKiDkvZPliptcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gdmFsdWUgXG4gICAgICovXG4gICAgc2V0SFAgKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuSFAgPSB2YWx1ZTtcbiAgICAgICAgaWYgKHRoaXMuSFAgPD0gMCkge1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnZGVhdGgnKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICog44OA44Oh44O844K4XG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHZhbHVlIFxuICAgICAqL1xuICAgIHNldERhbWFnZSAodmFsdWUpIHtcbiAgICAgICAgdGhpcy5IUCAtPSB2YWx1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICog5bmFXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHZhbHVlIFxuICAgICAqL1xuICAgIHNldFdpZHRoICh2YWx1ZSkge1xuICAgICAgICB0aGlzLndpZHRoID0gdmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIOmrmOOBlVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB2YWx1ZSBcbiAgICAgKi9cbiAgICBzZXRIZWlnaHQgKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gdmFsdWU7XG4gICAgfVxufSIsImltcG9ydCBFbnRlckZyYW1lIGZyb20gXCJqcy9Db21tb24vRW50ZXJGcmFtZVwiO1xuXG4vKipcbiAqIOihneeqgeWIpOWumlV0aWxpdHlcbiAqIHNpbmdsZXRvblxuICovXG5jbGFzcyBIaXRUZXN0IGV4dGVuZHMgRXZlbnRUYXJnZXQge1xuICAgIC8qKlxuICAgICAqIHZpZXfjgqrjg5bjgrjjgqfjgq/jg4jjga7ooZ3nqoHliKTlrprjgZfjgb7jgZlcbiAgICAgKiBAcGFyYW0ge3RoaXN9IHNlbGYgXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNsYXNzTmFtZSBcbiAgICAgKi9cbiAgICBnZXRIaXRPYmplY3RCeUNsYXNzTmFtZSAoc2VsZiwgY2xhc3NOYW1lKXtcbiAgICAgICAgbGV0IHJlc3VsdCA9IG51bGw7XG4gICAgICAgIGNvbnN0IHRhcmdldHMgPSBFbnRlckZyYW1lLnRhcmdldHMuZmlsdGVyICh0YXJnZXQgPT4gdGFyZ2V0LmNvbnN0cnVjdG9yLm5hbWUgPT09IGNsYXNzTmFtZSk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGFyZ2V0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gdGFyZ2V0c1tpXTtcbiAgICAgICAgICAgIGlmKHRoaXMuaGl0UmVjdChzZWxmLCB0YXJnZXQpKXtcbiAgICAgICAgICAgICAgICB0YXJnZXQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQgKCdoaXRSZWN0Jywge2RldGFpbDogc2VsZn0pKTtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSB0YXJnZXQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICog6Ieq5YiG6Ieq6Lqr44Go5L2V44GL44Gu6KGd56qB44KS5Yik5a6a44GZ44KLXG4gICAgICogQHBhcmFtIHt0aGlzfSBzZWxmIFxuICAgICAqL1xuICAgIGhpdE90aGVyIChzZWxmKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBmYWxzZTtcbiAgICAgICAgRW50ZXJGcmFtZS50YXJnZXRzXG4gICAgICAgIC5maWx0ZXIgKHRhcmdldCA9PiBzZWxmICE9PSB0YXJnZXQpXG4gICAgICAgIC5zb21lKHRhcmdldCA9PiB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLmhpdFJlY3Qoc2VsZiwgdGFyZ2V0KTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBoaXRYICh0YXJnZXRBLCB0YXJnZXRCKSB7XG4gICAgICAgIHJldHVybiB0YXJnZXRBLnggKyAodGFyZ2V0QS53aWR0aC8yKSA+IHRhcmdldEIueCAmJiB0YXJnZXRBLnggLSAodGFyZ2V0QS53aWR0aC8yKSA8IHRhcmdldEIueDtcbiAgICB9XG4gICAgaGl0WSAodGFyZ2V0QSwgdGFyZ2V0Qikge1xuICAgICAgICByZXR1cm4gdGFyZ2V0QS55ICsgKHRhcmdldEEuaGVpZ2h0LzIpID4gdGFyZ2V0Qi55ICYmIHRhcmdldEEueSAtICh0YXJnZXRBLmhlaWdodC8yKSA8IHRhcmdldEIueTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogdmlld+OCquODluOCuOOCp+OCr+ODiOWQjOWjq+OBruefqeW9ouihneeqgeWIpOWumlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSB0YXJnZXRBIFxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSB0YXJnZXRCIFxuICAgICAqL1xuICAgIGhpdFJlY3QgKHRhcmdldEEsIHRhcmdldEIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGl0WCh0YXJnZXRBLCB0YXJnZXRCKSAmJiB0aGlzLmhpdFkodGFyZ2V0QSwgdGFyZ2V0Qik7XG4gICAgfVxufVxuZXhwb3J0IGRlZmF1bHQgbmV3IEhpdFRlc3QgKCk7IiwiaW1wb3J0IFVuaXRCYXNlIGZyb20gXCJqcy9WaWV3L1VuaXRCYXNlXCI7XG5pbXBvcnQgSGl0VGVzdCBmcm9tIFwianMvVXRpbC9IaXRUZXN0XCI7XG5cbi8qKlxuICog6Ieq5qmf44Kv44Op44K5XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBsYXllciBleHRlbmRzIFVuaXRCYXNlIHtcbiAgICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgICAgIHN1cGVyICgpO1xuICAgICAgICB0aGlzLnggPSAxMDA7XG4gICAgICAgIHRoaXMueSA9IDIwMDtcbiAgICAgICAgdGhpcy5zZXRIUCgxMDApO1xuICAgICAgICB0aGlzLnNldFdpZHRoKDQwKTtcbiAgICAgICAgdGhpcy5zZXRIZWlnaHQoNDApO1xuICAgIH1cbiAgICBcbiAgICB1cGRhdGUgKCkge1xuICAgICAgICAvLyDnn6LljbDjgq3jg7zjgIDihpDihpHihpLihpPjgafli5XjgY/jgojjgYbjgavjgZfjgabjgY/jgaDjgZXjgYTjgIJcblxuICAgICAgICAvLyDjgrnjg5rjg7zjgrnjgq3jg7zjgpLmirzjgZnjgahCdWxsZXTjgYznmbrlsITjgZXjgozjgovjgojjgYbjgavjgZfjgabkuIvjgZXjgYRcblxuICAgICAgICAvLyDmlbXjga7lvL7jgavlvZPjgZ/jgaPjgZ/jgonjg4Djg6Hjg7zjgrjjgpLlj5fjgZHjgovjgojjgYbjgavjgZfjgabkuIvjgZXjgYTjgIJcbiAgICAgICAgY29uc3QgYnVsbGV0ID0gSGl0VGVzdC5nZXRIaXRPYmplY3RCeUNsYXNzTmFtZSh0aGlzLCBcIkJ1bGxldFwiKTtcbiAgICAgICAgaWYoYnVsbGV0KSB7XG5cbiAgICAgICAgICAgIC8vIEhQ44GMMOOBq+OBquOBo+OBn+OCieatu+S6oeeKtuaFi+OBq+OBl+OAgU1haW5NYW5hZ2XjgavpgJrnn6XjgZfjgabkuIvjgZXjgYTjgIJcbiAgICAgICAgICAgIC8vIHRoaXMuc2V0RGFtYWdlIChidWxsZXQuZGFtYWdlKTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nICh0aGlzLkhQKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOapn+S9k+aPj+eUu1xuICAgICAqIOS4ieinkuW9olxuICAgICAqIEBwYXJhbSB7Y3R4fSBjb250ZXh0IFxuICAgICAqL1xuICAgIGRyYXcgKGNvbnRleHQpIHtcblx0XHRjb250ZXh0LmJlZ2luUGF0aCgpO1xuXHRcdGNvbnRleHQubW92ZVRvKHRoaXMueCAtIDIwLCB0aGlzLnkgKyAxMCk7IFxuXHRcdGNvbnRleHQubGluZVRvKHRoaXMueCArIDIwLCB0aGlzLnkpO1xuXHRcdGNvbnRleHQubGluZVRvKHRoaXMueCAtIDIwLCB0aGlzLnkgLSAxMCk7XG5cdFx0Y29udGV4dC5jbG9zZVBhdGgoKTtcblxuXHRcdGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBcInJnYigwLDAsMClcIjsgLy/mnqDnt5rjga7oibJcblx0XHRjb250ZXh0LnN0cm9rZSgpO1xuXG5cdFx0Y29udGV4dC5maWxsU3R5bGU9XCJyZ2JhKDAsMCwyNTUsIDEpXCI7Ly/loZfjgorjgaTjgbbjgZfjga7oibJcblx0XHRjb250ZXh0LmZpbGwoKTtcbiAgICB9XG59IiwiaW1wb3J0IENvbW1vbkJhc2UgZnJvbSBcIi4uL0NvbW1vbi9Db21tb25CYXNlXCI7XG5cbi8qKlxuICogVUnjga7mj4/nlLvjgq/jg6njgrlcbiAqIOOCueOCs+OCouS7peWkluOBq+OCglxuICog6Ieq5qmf44Gu5L2T5YqbXG4gKiDntYzpgY7mmYLplpPjgoRcbiAqIOOCr+ODquOCouihqOekuuOAgeOCsuODvOODoOOCquODvOODkOODvOOBquOBqeOCguS9nOOBo+OBpuOBv+OBpuS4i+OBleOBhOOAglxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVSSBleHRlbmRzIENvbW1vbkJhc2Uge1xuICAgIGNvbnN0cnVjdG9yICgpIHtcbiAgICAgICAgc3VwZXIgKCk7XG4gICAgICAgIHRoaXMuc2NvcmUgPSAwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOOCueOCs+OColxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB2YWx1ZSBcbiAgICAgKi9cbiAgICBzZXRTY29yZSAodmFsdWUpIHtcbiAgICAgICAgdGhpcy5zY29yZSA9IHZhbHVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiDmj4/nlLtcbiAgICAgKiBAcGFyYW0ge2NvbnRleHR9IGNvbnRleHQgXG4gICAgICovXG4gICAgZHJhdyAoY29udGV4dCkge1xuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IFwicmdiKDI1NSwgMTY5LCAwKVwiO1xuICAgICAgICBjb250ZXh0LmZpbGxUZXh0KFwiU0NPUkUgOiBcIiArIHRoaXMuc2NvcmUsIDEwLCAxMCk7XG4gICAgfVxufSIsImltcG9ydCBDb21tb25CYXNlIGZyb20gXCJqcy9Db21tb24vQ29tbW9uQmFzZVwiO1xuXG4vKipcbiAqIOW8vuOBruODmeODvOOCueOCr+ODqeOCuVxuICog44Gd44Gu44G+44G+5L2/55So44GX44Gm44KC44GE44GE44GX44CBXG4gKiDpgZXjgYbnqK7poZ7jga7lvL7jgpLkvZzjgorjgZ/jgYTloLTlkIjjgIHjgZPjgaHjgonjgpLopIfoo73jgZfjgabkuIvjgZXjgYTjgIJcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQnVsbGV0IGV4dGVuZHMgQ29tbW9uQmFzZSB7XG4gICAgY29uc3RydWN0b3IgKHgsIHkpIHtcbiAgICAgICAgc3VwZXIgKCk7XG4gICAgICAgIHRoaXMueCA9IHg7XG4gICAgICAgIHRoaXMueSA9IHk7XG4gICAgICAgIHRoaXMuZGFtYWdlID0gMTA7XG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignaGl0UmVjdCcsIChlLCBzKT0+e1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2hpdCcsIGUuZGV0YWlsKTtcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveSAoKTtcbiAgICAgICAgfSlcbiAgICB9XG4gICAgLyoqXG4gICAgICog44K544OU44O844OJXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHZhbHVlIFxuICAgICAqL1xuICAgIHNldFNwZWVkICh2YWx1ZSkge1xuICAgICAgICAvLyBzcGVlZOOBqOOBhOOBhuOCr+ODqeOCueODoeODs+ODkOOBq3ZhbHVl44KS44K744OD44OI44GX44Gm44GP44Gg44GV44GEXG4gICAgICAgIHRoaXMuc3BlZWQgPSB2YWx1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVmVjdG9yMmQgIOS9meWKm+OBjOOBguOCjOOBsOioreWumuOBl+OBpuOBj+OBoOOBleOBhFxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB4IFxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB5IFxuICAgICAqL1xuICAgIHNldFZlY3RvciAoeCwgeSkge1xuICAgICAgICAvLyB2ZWN0b3LjgajjgYTjgYbjgq/jg6njgrnjg6Hjg7Pjg5Djgqrjg5bjgrjjgqfjgq/jg4jjgat2YWx1ZeOCkuOCu+ODg+ODiOOBl+OBpuOBj+OBoOOBleOBhFxuICAgIH1cbiAgICAvKipcbiAgICAgKiDkuI7jgYjjgovjg4Djg6Hjg7zjgrjlgKRcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gdmFsdWUgXG4gICAgICovXG4gICAgc2V0RGFtYWdlICh2YWx1ZSkge1xuICAgICAgICB0aGlzLmRhbWFnZSA9IHZhbHVlO1xuICAgIH1cbiAgICB1cGRhdGUgKCkge1xuICAgICAgICAvLyBzcGVlZOOBqCB2ZWN0b3LjgYvjgonjgIHlvL7jgpLnp7vli5XjgZXjgZvjgabjgY/jgaDjgZXjgYRcbiAgICAgICAgLy90aGlzLnggKz0gP1xuICAgICAgICAvL3RoaXMueSArPSA/XG4gICAgICAgIHRoaXMueCArPSB0aGlzLnNwZWVkO1xuXG4gICAgICAgIC8vIGNhbnZhc+OBruWkluOBq+WHuuOBpuOBl+OBvuOBo+OBn+OCieOAgWRlc3Ryb3koKeOBmeOCi+OCiOOBhue1hOOCk+OBp+S4i+OBleOBhOOAglxuICAgIH1cbiAgICAvKipcbiAgICAgKiDlvL7jga7mj4/nlLtcbiAgICAgKiBAcGFyYW0ge2N0eH0gY29udGV4dCBcbiAgICAgKi9cbiAgICBkcmF3IChjb250ZXh0KSB7XG4gICAgICAgIGNvbnRleHQuYmVnaW5QYXRoICgpO1xuICAgICAgICBjb250ZXh0LmFyYyAoIHRoaXMueCwgdGhpcy55LCAyLCAwICogTWF0aC5QSSAvIDE4MCwgMzYwICogTWF0aC5QSSAvIDE4MCwgZmFsc2UgKSA7XG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gXCJyZ2JhKDI1NSwgMjU1LCAwLCAxKVwiIDtcbiAgICAgICAgY29udGV4dC5maWxsICgpO1xuICAgICAgICBjb250ZXh0LnN0cm9rZSgpO1xuICAgIH1cbn0iLCJpbXBvcnQgVW5pdEJhc2UgZnJvbSBcIi4vVW5pdEJhc2VcIjtcbmltcG9ydCBCdWxsZXQgZnJvbSBcIi4vQnVsbGV0XCI7XG5pbXBvcnQgSGl0VGVzdCBmcm9tIFwiLi4vVXRpbC9IaXRUZXN0XCI7XG5cbi8qKlxuICog5pW144GuQmFzZeOCr+ODqeOCueOAglxuICog5paw6KaP44Gu5pW144KS5L2c44KL5aC05ZCI44Gv44GT44Gu44Kv44Op44K544KS57aZ5om/44GX44Gm44GP44Gg44GV44GE44CCXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVuZW15IGV4dGVuZHMgVW5pdEJhc2Uge1xuICAgIGNvbnN0cnVjdG9yICgpIHtcbiAgICAgICAgc3VwZXIgKCk7XG4gICAgICAgIHRoaXMueCA9IDQwMDtcbiAgICAgICAgdGhpcy55ID0gMjAwO1xuICAgICAgICB0aGlzLnNldEhQKDUpO1xuICAgICAgICB0aGlzLmNyYXNoU2NvcmUgPSAxMDtcbiAgICAgICAgc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYnVsbGV0ID0gbmV3IEJ1bGxldCAodGhpcy54IC0gMTAsIHRoaXMueSk7XG4gICAgICAgICAgICBidWxsZXQuc2V0U3BlZWQoLTQpO1xuICAgICAgICB9LCA0MDApXG4gICAgfVxuXG4gICAgdXBkYXRlICgpe1xuICAgICAgICAvLyDli5XjgY3jga9vdmVycmlkZeOBl+OBpuS4i+OBleOBhOOAguKGk+OBruOCteODs+ODl+ODq+OBr+S4iuS4i+mBi+WLlVxuICAgICAgICB0aGlzLmRlZyA9IHRoaXMuZGVnIHx8IDA7XG4gICAgICAgIHRoaXMueSA9IE1hdGguY29zKHRoaXMuZGVnICogKE1hdGguUEkgLyAxODApKSAqIDMgKyB0aGlzLnk7XG4gICAgICAgIHRoaXMuZGVnKys7XG5cbiAgICAgICAgY29uc3QgYnVsbGV0ID0gSGl0VGVzdC5nZXRIaXRPYmplY3RCeUNsYXNzTmFtZSAoXCJCdWxsZXRcIik7XG4gICAgICAgIGlmIChidWxsZXQpIHtcbiAgICAgICAgICAgIC8vIOW8vuOBq+OBguOBn+OBo+OBn+OCieODgOODoeODvOOCuOOCkuS4juOBiOOAgUVuZW15TWFuYWdlcuOBq+mAmuefpeOBl+OBpuS4i+OBleOBhOOAglxuICAgICAgICAgICAgLy8gYnVsbGV0LmRhbWFnZVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIOaPj+eUu1xuICAgICAqIEBwYXJhbSB7Y29udGV4dH0gY29udGV4dCBcbiAgICAgKi9cbiAgICBkcmF3IChjb250ZXh0KSB7XG4gICAgICAgIGNvbnRleHQuYmVnaW5QYXRoICgpIDtcblxuICAgICAgICBjb250ZXh0LmFyYyggdGhpcy54LCB0aGlzLnksIDIwLCAwICogTWF0aC5QSSAvIDE4MCwgMzYwICogTWF0aC5QSSAvIDE4MCwgZmFsc2UgKSA7XG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gXCJyZ2JhKDI1NSwwLDAsMC44KVwiIDtcbiAgICAgICAgY29udGV4dC5maWxsKCkgO1xuXG4gICAgICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBcInB1cnBsZVwiIDtcbiAgICAgICAgY29udGV4dC5saW5lV2lkdGggPSA4IDtcbiAgICAgICAgY29udGV4dC5zdHJva2UoKSA7XG4gICAgfVxufSIsImltcG9ydCBFbmVteSBmcm9tIFwianMvVmlldy9FbmVteVwiO1xuaW1wb3J0IENvbW1vbkJhc2UgZnJvbSBcImpzL0NvbW1vbi9Db21tb25CYXNlXCI7XG4vKipcbiAqIOaVteODpuODi+ODg+ODiOOCkueuoeeQhuOBmeOCi+ODnuODjeODvOOCuOODo+ODvOOCr+ODqeOCuVxuICogXG4gKiDmnIDliJ3jga8x5L2T44Gg44GR44Gn44GN44Gm44GE44KL44Gu44Gn5LuW44Gr44KC6KSH5pWw5L2T55Sf5oiQ44GX44GmXG4gKiDjg5Djg6rjgqjjg7zjgrfjg6fjg7PjgpLkvZzjgaPjgabkuIvjgZXjgYTjgIJcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRW5lbXlNYW5hZ2VyIGV4dGVuZHMgQ29tbW9uQmFzZSB7XG4gICAgY29uc3RydWN0b3IgKCl7XG4gICAgICAgIHN1cGVyICgpO1xuICAgICAgICB0aGlzLmVuZW15c0xpc3QgPSBbXTtcbiAgICAgICAgdGhpcy5lbmVteXNMaXN0LnB1c2ggKG5ldyBFbmVteSgpKTtcbiAgICAgICAgdGhpcy5lbmVteXNMaXN0LmZvckVhY2goZW5lbXkgPT4ge1xuICAgICAgICAgICAgZW5lbXkuYWRkRXZlbnRMaXN0ZW5lciAoJ2RlYXRoJywgKGUpID0+IHtcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmVuZW15c0xpc3TjgYvjgonmrbvjgpPjgaBlbmVteSDjgpLliYrpmaRcbiAgICAgICAgICAgICAgICB0aGlzLmVuZW15c0xpc3QgPSB0aGlzLmVuZW15c0xpc3QuZmlsdGVyKGVuZSA9PiBlbmUgIT0gZW5lbXkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB1cGRhdGUgKCkge1xuICAgIH1cbn0iLCJpbXBvcnQgTWFpbk1hbmFnZXIgZnJvbSAnanMvTWFuYWdlci9NYWluTWFuYWdlcic7XG5pbXBvcnQgRW50ZXJGcmFtZSBmcm9tICdqcy9Db21tb24vRW50ZXJGcmFtZSc7XG5cbmNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjYW52YXMpO1xuXG4vLyBDYW52YXPjgpLnlLvpnaLjgYTjgaPjgbHjgYTjgavooajnpLrjgZnjgotcbmZ1bmN0aW9uIG9uUmVzaXplKCkge1xuICAgIGNhbnZhcy53aWR0aCA9IGlubmVyV2lkdGggKiBkZXZpY2VQaXhlbFJhdGlvO1xuICAgIGNhbnZhcy5oZWlnaHQgPSBpbm5lckhlaWdodCAqIGRldmljZVBpeGVsUmF0aW87XG59XG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgb25SZXNpemUpO1xub25SZXNpemUoKTtcblxubmV3IE1haW5NYW5hZ2VyKGNhbnZhcyk7XG5FbnRlckZyYW1lLnN0YXJ0QW5pbWF0aW9uRnJhbWUgKGNhbnZhcyk7XG5cbi8qKlxuICogZW50b3J5IGpz44CA54m544Gr44GT44KM44KS44GE44GY44KL5b+F6KaB44Gv44GC44KK44G+44Gb44KT44CCXG4gKi9cbiIsImltcG9ydCBQbGF5ZXIgZnJvbSBcImpzL1ZpZXcvUGxheWVyXCI7XG5pbXBvcnQgVUkgZnJvbSBcImpzL1ZpZXcvVUlcIjtcbmltcG9ydCBFbmVteU1hbmFnZXIgZnJvbSBcImpzL01hbmFnZXIvRW5lbXlNYW5hZ2VyXCI7XG4vLyBpbXBvcnQgQ29tbW9uQmFzZSBmcm9tIFwianMvQ29tbW9uL0NvbW1vbkJhc2VcIjtcblxuLyoqXG4gKiBNYWluTWFuYWdlclxuICog5oyH56S657O757Wx44Gu44OI44OD44OX44Kv44Op44K5XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1haW5NYW5hZ2VyIHtcbiAgICBjb25zdHJ1Y3RvciAoY2FudmFzKXtcbiAgICAgICAgLy8gc3VwZXIgKCk7XG4gICAgICAgIHRoaXMuY2FudmFzID0gY2FudmFzO1xuICAgICAgICBjb25zb2xlLmxvZyhjYW52YXMpO1xuICAgICAgICB0aGlzLnBsYXllciA9IG5ldyBQbGF5ZXIoKTtcbiAgICAgICAgdGhpcy5lbmVteU1hbmFnZXIgPSBuZXcgRW5lbXlNYW5hZ2VyICgpO1xuXG4gICAgICAgIC8vVUnjgpLooajnpLrjgZXjgZvjgabkuIvjgZXjgYTjgIJVSeOCr+ODqeOCueOBr1ZpZXfjg5Xjgqnjg6vjg4DjgavjgYLjgorjgb7jgZlcbiAgICAgICAgbmV3IFVJICgpO1xuXG4gICAgfVxufSJdLCJzb3VyY2VSb290IjoiIn0=